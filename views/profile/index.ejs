<!-- views/profile/index.ejs -->
<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head', { title: 'My Profile' }) %>
<body>
  <div class="page">
    <%- include('../partials/navbar') %>
    <%- include('../partials/sidebar') %>
    
    <div class="page-wrapper">
      <div class="container-xl">
        <div class="page-header d-print-none">
          <div class="row align-items-center">
            <div class="col">
              <h2 class="page-title">My Profile</h2>
            </div>
            <div class="col-auto ms-auto">
              <div class="btn-list">
                <a href="/profile/edit" class="btn btn-primary d-none d-sm-inline-block">
                  <i class="ti ti-pencil"></i>
                  Edit Profile
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="page-body">
        <div class="container-xl">
          <%- include('../partials/messages') %>
          
          <div class="row row-cards">
            <div class="col-12 col-lg-4">
              <div class="card">
                <div class="card-body p-4 text-center">
                  <span class="avatar avatar-xl mb-3 avatar-rounded">ðŸ‘¤</span>
                  <h3 class="m-0 mb-1"><%= user.username %></h3>
                  <div class="text-muted"><%= user.role %></div>
                  <div class="mt-3">
                    <span class="badge bg-blue-lt"><%= user.is_active ? 'Active' : 'Inactive' %></span>
                  </div>
                </div>
                <div class="d-flex">
                  <a href="/profile/change-password" class="card-btn">Change Password</a>
                </div>
              </div>
            </div>
            
            <div class="col-12 col-lg-8">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">Profile Information</h3>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label class="form-label">Username</label>
                    <div class="form-control-plaintext"><%= user.username %></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Email</label>
                    <div class="form-control-plaintext"><%= user.email %></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Role</label>
                    <div class="form-control-plaintext"><%= user.role %></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Last Login</label>
                    <div class="form-control-plaintext">
                      <%= user.last_login ? new Date(user.last_login).toLocaleString() : 'Never' %>
                    </div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Account Created</label>
                    <div class="form-control-plaintext">
                      <%= new Date(user.createdAt).toLocaleString() %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <%- include('../partials/footer') %>
    </div>
  </div>
  
  <%- include('../partials/scripts') %>
</body>
</html>